{"version":3,"sources":["lib/api.js","lib/wallet.js","views/const.js","views/Verify.js","views/styles.js","components/Footer.js","views/Homepage.js","lib/id.js","views/NewLinkForm.js","views/NewLinkSuccess.js","App.js","reportWebVitals.js","index.js"],"names":["getLink","host","path","axios","get","provider","web3Modal","Web3Modal","network","cacheProvider","theme","providerOptions","coinbasewallet","package","CoinbaseWalletSDK","options","appName","infuraId","process","rpc","chainId","walletconnect","WalletConnectProvider","connectWallet","a","connect","instance","ethers","providers","Web3Provider","getSignatureAndAddress","message","signer","getSigner","signMessage","signature","getAddress","address","verifySignature","utils","verifyMessage","VIEWS","URL_FEEDBACK","REGEX","URL_PATH","DESTINATION_URL","SMART_CONTRACT","Container","styled","div","Title","h1","Description","h2","Highlighted","span","Button","button","Verify","link","setView","useState","ethAccount","setEthAccount","setIsWalletConnected","isAwaitingVerification","setIsAwaitingVerification","isFailedToVerify","setIsFailedToVerify","handleMetamask","verifyWallet","console","log","wallet","verifyParams","useEffect","id","then","data","allow","onClick","UndecoratedLink","BodyContainer","p","customMobileWidth","BodyText","StyledInput","input","isError","customWidth","InputFeedbackText","isSuccess","StyledLabel","label","FormContainer","FormLeftColumn","FormRightColumn","FormRow","ErrorTextContainer","StyledButton","disabled","ButtonContainer","NFKeyURL","FadeBlock","fade","in","TwitterImage","img","Footer","href","target","src","Homepage","setFade","style","color","setTimeout","generateId","length","chars","i","Math","floor","random","NewLinkForm","setNewLink","window","document","location","pathname","destinationUrl","setDestinationUrl","String","substring","urlPath","setUrlPath","urlPathFeedback","setUrlPathFeedback","smartContractAddress","setSmartContractAddress","typingTimer","useRef","isUrlPathError","isDestinationUrlError","test","isSmartContractAddressError","isAbleToSave","clearTimeout","current","destination_url","catch","e","alert","marginTop","onChange","value","spellCheck","placeholder","requirement_smart_contract","post","createLink","_","NewLinkSuccess","newLink","marginBottom","App","isPath","setLink","view","page","createVisit","getElementById","contentWindow","className","frameborder","height","width","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a50f92a9.chunk.js","sourcesContent":["import axios from \"axios\"\n\nexport function getLink(host, path) {\n  return axios.get(`api/link?host=${host}&path=${path}`, {})\n}\n\nexport function createLink({\n  host,\n  pathname,\n  destination_url,\n  requirement_smart_contract,\n}) {\n  return axios.post(\"api/link\", {\n    host,\n    pathname,\n    requirement_smart_contract,\n    destination_url,\n  })\n}\n\nexport function createVisit({ page }) {\n  return axios.post(\"api/visit\", {\n    page,\n  })\n}\n","import { ethers } from \"ethers\"\nimport Web3Modal from \"web3modal\"\nimport CoinbaseWalletSDK from \"@coinbase/wallet-sdk\"\nimport WalletConnectProvider from \"@walletconnect/web3-provider\"\n\nlet provider\n\nconst web3Modal = new Web3Modal({\n  network: \"mainnet\", // optional\n  cacheProvider: false, // optional\n  theme: \"dark\",\n  providerOptions: {\n    coinbasewallet: {\n      package: CoinbaseWalletSDK, // Required\n      options: {\n        appName: \"NFKey\", // Required\n        infuraId: process.env.REACT_APP_INFURA_ID, // Required\n        rpc: \"\", // Optional if `infuraId` is provided; otherwise it's required\n        chainId: 1, // Optional. It defaults to 1 if not provided\n      },\n    },\n    walletconnect: {\n      package: WalletConnectProvider, // required\n      options: {\n        infuraId: process.env.REACT_APP_INFURA_ID, // required\n      },\n    },\n  },\n})\n\nexport async function connectWallet() {\n  const instance = await web3Modal.connect()\n  provider = new ethers.providers.Web3Provider(instance)\n}\n\n// export function getEthAccounts() {\n//   return provider.get\n// }\n\nexport async function getSignatureAndAddress(message) {\n  const signer = provider.getSigner()\n  const signature = await signer.signMessage(message)\n  const address = await signer.getAddress()\n  return { address, message, signature }\n}\n\nexport function verifySignature({ address, message, signature }) {\n  const resolvedAddress = ethers.utils.verifyMessage(message, signature)\n  return address === resolvedAddress\n}\n","//VIEWS\nexport const VIEWS = {\n  LOADING: \"loading\",\n  VERIFYING: \"verifying\",\n  VERIFIED: \"verified\",\n  NEWLINKFORM: \"newlink-form\",\n  NEWLINKSUCCESS: \"newlink-success\",\n  HOMEPAGE: \"homepage\",\n}\n\n// URL PATH FEEDBACK\nexport const URL_FEEDBACK = {\n  IS_AVAILALABLE: \"This URL is available!\",\n  IS_NOT_AVAILABLE: \"Sorry, this URL is already taken.\",\n  MINIMUM_3_CHARS: \"URL path must be at least 3 characters.\",\n  INVALID: \"Invalid URL path\",\n  CHECKING_AVAILABILITY: \"Checking availability...\",\n  BLANK: \" \",\n}\n\n// REGEX\nexport const REGEX = {\n  URL_PATH: /^[a-zA-Z0-9-_]*$/,\n  DESTINATION_URL:\n    /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,18}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/,\n  SMART_CONTRACT: /^0x[a-fA-F0-9]{40}$/,\n}\n","import { Fragment, useEffect, useState } from \"react\"\nimport styled from \"styled-components\"\nimport * as wallet from \"../lib/wallet\"\nimport { VIEWS } from \"./const\"\nimport axios from \"axios\"\n\nconst Container = styled.div`\n  text-align: center;\n  width: 100%;\n\n  @media screen and (max-width: 768px) {\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    position: absolute;\n    /* top: 30%; */\n  }\n  @media screen and (min-width: 1025px) {\n    position: absolute;\n    top: 25%;\n  }\n`\n\nconst Title = styled.h1`\n  font-family: \"Archivo Black\";\n  font-size: 72px;\n  color: #fff;\n  /* margin-bottom: 0px; */\n`\n\nconst Description = styled.h2`\n  color: #ddd;\n  font-family: \"Raleway\";\n`\n\nconst SmallText = styled.span`\n  display: block;\n  color: #aaa;\n  font-family: \"Mukta\";\n  margin-top: 40px;\n  font-size: 20px;\n`\n\nconst Highlighted = styled.span`\n  color: #0df;\n`\n\nconst Button = styled.button`\n  background-color: transparent;\n  border: 2px solid #ddd;\n  color: #ddd;\n  cursor: pointer;\n  font-family: \"Mukta\";\n  font-size: 1em;\n  font-weight: 700;\n  margin-top: 50px;\n  text-transform: uppercase;\n  padding: 15px;\n`\n\nexport function Verify({ link, setView }) {\n  const [ethAccount, setEthAccount] = useState()\n  const [isWalletConnected, setIsWalletConnected] = useState(false)\n  const [isAwaitingVerification, setIsAwaitingVerification] = useState(false)\n  const [isFailedToVerify, setIsFailedToVerify] = useState(false)\n\n  const handleMetamask = async () => {\n    try {\n      await verifyWallet()\n      setIsWalletConnected(true)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const verifyWallet = async () => {\n    try {\n      await wallet.connectWallet()\n      const verifyParams = await wallet.getSignatureAndAddress(\n        \"Welcome to NFKey!\\n\\nPlease click Sign to verify that you own this wallet. This will not result in a blockchain transaction or incur any gas fees.\"\n      )\n      if (wallet.verifySignature(verifyParams)) {\n        setEthAccount(verifyParams.address)\n      }\n    } catch (e) {\n      console.log(e)\n      setIsAwaitingVerification(false)\n      setIsFailedToVerify(true)\n    }\n  }\n\n  // useEffect(() => {\n  //   if (isWalletConnected)\n  // }, [isWalletConnected])\n\n  useEffect(() => {\n    if (ethAccount) {\n      setIsAwaitingVerification(true)\n      axios\n        .get(`api/verify?link_id=${link.id}&wallet_address=${ethAccount}`)\n        .then(({ data: verdict }) => {\n          if (verdict.allow) setView(VIEWS.VERIFIED)\n          else {\n            setIsAwaitingVerification(false)\n            setIsFailedToVerify(true)\n          }\n        })\n    }\n  }, [ethAccount])\n\n  return (\n    <Container>\n      <Title>\n        NF<Highlighted>Key</Highlighted>\n      </Title>\n      {isAwaitingVerification && <Description>Verifying...</Description>}\n      {isFailedToVerify && <Description>Verification failed.</Description>}\n      {!isFailedToVerify && !isAwaitingVerification && (\n        <Fragment>\n          <Description>\n            This content requires ownership of a specific ERC-721 token.\n          </Description>\n          <Description>\n            Please verify ownership of the required token(s).\n          </Description>\n          {/* <SmallText>Choose your wallet...</SmallText> */}\n          <Button onClick={handleMetamask}>Verify Ownership</Button>\n        </Fragment>\n      )}\n    </Container>\n  )\n}\n","import styled from \"styled-components\"\n\nexport const Container = styled.div`\n  cursor: default;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  width: 100%;\n\n  @media screen and (max-width: 768px) {\n    /* margin-top: 15%; */\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    position: absolute;\n    top: 25%;\n    width: 100%;\n  }\n\n  @media screen and (min-width: 1025px) {\n    position: absolute;\n    top: 25%;\n  }\n`\n\nexport const Title = styled.h1`\n  font-family: \"Archivo Black\";\n  font-size: 72px;\n  color: #eee;\n  margin-bottom: 0px;\n`\n\nexport const Highlighted = styled.span`\n  color: #0cf;\n`\n\nexport const UndecoratedLink = styled.a`\n  text-decoration: none;\n\n  :hover {\n    text-decoration: none;\n  }\n`\n\nexport const Description = styled.h2`\n  color: #ddd;\n  font-family: \"Raleway\";\n  padding-left: 20px;\n  padding-right: 20px;\n\n  @media screen and (max-width: 768px) {\n    font-size: 1.5em;\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    font-size: 1.8em;\n  }\n\n  @media screen and (min-width: 1025px) {\n    font-size: 2em;\n  }\n`\n\nexport const BodyContainer = styled.div`\n  @media screen and (max-width: 768px) {\n    width: ${(p) => (p.customMobileWidth ? p.customMobileWidth : null)};\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    max-width: 80%;\n  }\n\n  @media screen and (min-width: 1025px) {\n    max-width: 700px;\n  }\n`\n\nexport const BodyText = styled.span`\n  color: #ddd;\n  font-family: \"Raleway\";\n  font-size: 18px;\n`\n\nexport const StyledInput = styled.input`\n  background-color: #112;\n  color: #ddd;\n  border: 1px solid ${(p) => (p.isError ? \"#d36\" : \"#ddd\")};\n  font-family: \"Mukta\";\n  font-size: 1em;\n  padding: 6px;\n  padding-left: 10px;\n\n  @media screen and (min-width: 1025px) {\n    width: ${(p) => (p.customWidth ? p.customWidth : \"100%\")};\n  }\n`\n\nexport const InputFeedbackText = styled.span`\n  color: ${(p) => (p.isError ? \"#d36\" : p.isSuccess ? \"#3d6\" : \"#aaa\")};\n  font-family: \"Mukta\";\n  font-size: 14px;\n  justify-self: flex-start;\n  white-space: pre;\n`\n\nexport const StyledLabel = styled.label`\n  color: #ddd;\n  margin-right: 15px;\n  font-family: \"Mukta\";\n  font-size: 1em;\n  font-weight: 700;\n  text-transform: uppercase;\n`\n\nexport const FormContainer = styled.div`\n  margin-top: 40px;\n`\n\nexport const FormLeftColumn = styled.div`\n  display: flex;\n  /* justify-content: flex-end; */\n  align-items: center;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    justify-content: center;\n    width: 100%;\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    justify-content: flex-end;\n  }\n\n  @media screen and (min-width: 1025px) {\n    justify-content: flex-end;\n  }\n`\n\nexport const FormRightColumn = styled.div`\n  display: flex;\n\n  /* text-align: left; */\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    align-items: stretch;\n    /* grid-row-start: 2; */\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    grid-column-start: 2;\n  }\n\n  @media screen and (min-width: 1025px) {\n    justify-content: flex-start;\n    grid-column-start: 2;\n  }\n`\n\nexport const FormRow = styled.div`\n  display: grid;\n  @media screen and (max-width: 768px) {\n    grid-template-rows: 1fr 1fr;\n    /* margin-bottom: 10px; */\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    grid-template-columns: 1fr 2fr;\n  }\n\n  @media screen and (min-width: 1025px) {\n    grid-template-columns: 1fr 2fr;\n    margin-bottom: 20px;\n  }\n`\n\nexport const ErrorTextContainer = styled.div`\n  display: grid;\n  @media screen and (max-width: 768px) {\n    grid-template-rows: 1fr 1fr;\n    margin-top: -10px;\n    margin-bottom: -10px;\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    grid-template-columns: 1fr 2fr;\n  }\n\n  @media screen and (min-width: 1025px) {\n    margin-top: -20px;\n    grid-template-columns: 1fr 2fr;\n    margin-bottom: 20px;\n  }\n`\n\nexport const StyledButton = styled.button`\n  background-color: transparent;\n  border: ${(p) => (p.disabled ? \"1px solid #666\" : \"1px solid #0cf\")};\n  color: ${(p) => (p.disabled ? \"#666\" : \"#0cf\")};\n  cursor: ${(p) => (p.disabled ? \"not-allowed\" : \"pointer\")};\n  font-family: \"Mukta\";\n  font-size: 1em;\n  font-weight: 700;\n  padding: 7px;\n  text-transform: uppercase;\n\n  :hover {\n    background-color: ${(p) => !p.disabled && \"#001026\"};\n  }\n\n  @media screen and (max-width: 768px) {\n    flex-grow: 1;\n    margin-top: 10px;\n    /* width: 100%; */\n  }\n  @media screen and (min-width: 1025px) {\n    flex-grow: 1;\n    margin-left: 10px;\n    min-width: 200px;\n  }\n`\n\nexport const ButtonContainer = styled.div`\n  display: flex;\n  margin-top: 34px;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n    margin-bottom: 80px;\n  }\n  @media screen and (min-width: 1025px) {\n    flex-direction: row;\n  }\n`\n\nexport const NFKeyURL = styled.label`\n  color: #aaa;\n  font-family: \"Mukta\";\n  font-size: 1em;\n  font-weight: 700;\n  margin-right: 15px;\n`\n\nexport const NFKeyURLSpacer = styled.div`\n  @media screen and (max-width: 768px) {\n    /* grid-template-rows: 1fr 1fr; */\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    /* grid-template-columns: 1fr 2fr; */\n  }\n\n  @media screen and (min-width: 1025px) {\n    flex-grow: 1;\n    text-align: left;\n  }\n`\nexport const FadeBlock = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media screen and (min-width: 1025px) {\n    opacity: ${(p) => (p.fade.in ? 1 : 0)};\n    transition: opacity 1s ease;\n  }\n`\n","import styled from \"styled-components\"\nimport { UndecoratedLink } from \"../views/styles\"\n\nconst TwitterImage = styled.img`\n  height: 42px;\n  width: 42px;\n  filter: brightness(0) invert(0.9);\n\n  @media screen and (max-width: 768px) {\n    /* margin-top: 40px; */\n  }\n\n  @media screen and (min-width: 769px) and (max-width: 1024px) {\n    /* max-width: 80%; */\n  }\n\n  @media screen and (min-width: 1025px) {\n    margin-top: 80px;\n  }\n`\nexport function Footer() {\n  return (\n    <UndecoratedLink href=\"https://twitter.com/nfkey1\" target=\"_blank\">\n      <TwitterImage src={process.env.PUBLIC_URL + \"/twitter.png\"} />\n    </UndecoratedLink>\n  )\n}\n","import {\n  BodyContainer,\n  BodyText,\n  ButtonContainer,\n  Container,\n  Description,\n  FadeBlock,\n  Highlighted,\n  StyledButton,\n  Title,\n} from \"./styles\"\nimport { VIEWS } from \"./const\"\nimport { Fragment, useEffect } from \"react\"\nimport { Footer } from \"../components/Footer\"\n\nexport function Homepage({ fade, setFade, setView }) {\n  useEffect(() => {\n    setFade({ in: true })\n  }, [])\n  return (\n    <Fragment>\n      <Container>\n        <Title>\n          NF<Highlighted>Key</Highlighted>\n        </Title>\n        <FadeBlock fade={fade}>\n          <Description>\n            Create Ethereum token based access for your content.\n          </Description>\n          <BodyContainer customMobileWidth={\"85%\"}>\n            <BodyText style={{ color: \"#aeaeae\" }}>\n              NFKey is a free tool that allows you to create shortlinks to your\n              private Web 2.0 content. These links require visitors to verify\n              ownership of a specific Ethereum token or NFT in order to access\n              the content. No code. No gas fees.\n            </BodyText>\n          </BodyContainer>\n          <ButtonContainer>\n            <StyledButton\n              onClick={() => {\n                setFade({ in: false })\n                setTimeout(() => setView(VIEWS.NEWLINKFORM), 800)\n              }}\n            >\n              Create new shortlink\n            </StyledButton>\n          </ButtonContainer>\n          <Footer />\n        </FadeBlock>\n      </Container>\n    </Fragment>\n  )\n}\n","export function generateId(length) {\n  const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\n  let id = \"\"\n  for (let i = 1; i <= length; i++) {\n    id += chars[Math.floor(Math.random() * chars.length)]\n  }\n  return id\n}\n","import { useEffect, useRef, useState } from \"react\"\nimport { generateId } from \"../lib/id\"\nimport { createLink, getLink } from \"../lib/api\"\nimport {\n  Container,\n  BodyContainer,\n  BodyText,\n  ButtonContainer,\n  ErrorTextContainer,\n  FadeBlock,\n  FormContainer,\n  FormLeftColumn,\n  FormRightColumn,\n  FormRow,\n  Highlighted,\n  InputFeedbackText,\n  NFKeyURL,\n  StyledButton,\n  StyledInput,\n  StyledLabel,\n  Title,\n  UndecoratedLink,\n} from \"./styles\"\nimport { REGEX, URL_FEEDBACK, VIEWS } from \"./const\"\nimport { Footer } from \"../components/Footer\"\n\nexport function NewLinkForm({ fade, setFade, setNewLink, setView }) {\n  const { host, pathname } = window.document.location\n  const [destinationUrl, setDestinationUrl] = useState(\"\")\n  const [urlPath, setUrlPath] = useState(\n    pathname !== \"/\" ? String(pathname).substring(1) : generateId(6)\n  )\n  const [urlPathFeedback, setUrlPathFeedback] = useState(\"\")\n  const [smartContractAddress, setSmartContractAddress] = useState(\"\")\n  const typingTimer = useRef()\n\n  const isUrlPathError =\n    urlPathFeedback === URL_FEEDBACK.IS_NOT_AVAILABLE ||\n    urlPathFeedback === URL_FEEDBACK.MINIMUM_3_CHARS ||\n    urlPathFeedback === URL_FEEDBACK.INVALID\n\n  const isDestinationUrlError = !REGEX.DESTINATION_URL.test(destinationUrl)\n  const isSmartContractAddressError =\n    !REGEX.SMART_CONTRACT.test(smartContractAddress)\n\n  const isAbleToSave =\n    urlPathFeedback === URL_FEEDBACK.IS_AVAILALABLE &&\n    !isSmartContractAddressError & !isDestinationUrlError\n\n  const handleRandomizeClick = () => {\n    setUrlPath(generateId(6))\n  }\n\n  const handleCreateClick = () => {\n    createLink({\n      host: \"nfkey.to\",\n      pathname: urlPath,\n      requirement_smart_contract: smartContractAddress,\n      destination_url: destinationUrl,\n    })\n      .then((_) => {\n        setNewLink({ host: \"nfkey.to\", pathname: urlPath })\n        setFade({ in: false })\n        setTimeout(() => setView(VIEWS.NEWLINKSUCCESS), 800)\n      })\n      .catch((e) => alert(`There was a problem.`))\n  }\n\n  const handleDestinationUrlChange = (e) => {\n    setDestinationUrl(e.target.value)\n  }\n\n  const handleUrlPathChange = (e) => {\n    setUrlPath(e.target.value)\n  }\n\n  const handleSmartContractAddressChange = (e) => {\n    setSmartContractAddress(e.target.value)\n  }\n\n  useEffect(() => {\n    clearTimeout(typingTimer.current)\n    if (String(urlPath).length < 3) {\n      return setUrlPathFeedback(URL_FEEDBACK.MINIMUM_3_CHARS)\n    }\n    if (!REGEX.URL_PATH.test(String(urlPath))) {\n      return setUrlPathFeedback(URL_FEEDBACK.INVALID)\n    }\n\n    setUrlPathFeedback(URL_FEEDBACK.BLANK)\n    typingTimer.current = setTimeout(() => {\n      setUrlPathFeedback(URL_FEEDBACK.CHECKING_AVAILABILITY)\n      setTimeout(() => {\n        getLink(\"nfkey.to\", urlPath)\n          .then(({ data: link }) => {\n            if (link.destination_url) {\n              setUrlPathFeedback(URL_FEEDBACK.IS_NOT_AVAILABLE)\n            } else {\n              setUrlPathFeedback(URL_FEEDBACK.IS_AVAILALABLE)\n            }\n          })\n          .catch((e) => alert(`error getting link: ${e}`))\n      }, 1000)\n    }, 1000)\n  }, [urlPath])\n\n  useEffect(() => {\n    setTimeout(() => setFade({ in: true }), 0)\n  }, [])\n\n  return (\n    <Container>\n      <UndecoratedLink href=\"https://nfkey.to\">\n        <Title>\n          NF<Highlighted>Key</Highlighted>\n        </Title>\n      </UndecoratedLink>\n      <FadeBlock fade={fade}>\n        <BodyContainer style={{ marginTop: \"30px\" }}>\n          <BodyText>Please complete all of the fields below.</BodyText>\n          <FormContainer>\n            <FormRow>\n              <FormLeftColumn>\n                <StyledLabel>Shortlink</StyledLabel>\n                <NFKeyURL>nfkey.to/</NFKeyURL>\n              </FormLeftColumn>\n              <FormRightColumn>\n                <StyledInput\n                  customWidth={\"40%\"}\n                  isError={isUrlPathError}\n                  onChange={handleUrlPathChange}\n                  spellCheck={false}\n                  value={urlPath}\n                />\n              </FormRightColumn>\n            </FormRow>\n            <ErrorTextContainer>\n              <FormRightColumn>\n                <InputFeedbackText\n                  isError={isUrlPathError}\n                  isSuccess={urlPathFeedback === URL_FEEDBACK.IS_AVAILALABLE}\n                >\n                  {urlPathFeedback}\n                </InputFeedbackText>\n              </FormRightColumn>\n            </ErrorTextContainer>\n            <FormRow>\n              <FormLeftColumn>\n                <StyledLabel>Destination URL</StyledLabel>\n              </FormLeftColumn>\n              <FormRightColumn>\n                <StyledInput\n                  isError={destinationUrl && isDestinationUrlError}\n                  onChange={handleDestinationUrlChange}\n                  placeholder={\"https://example.com\"}\n                  spellCheck={false}\n                  value={destinationUrl}\n                />\n              </FormRightColumn>\n            </FormRow>\n            <FormRow>\n              <FormLeftColumn>\n                <StyledLabel>Smart contract address</StyledLabel>\n              </FormLeftColumn>\n              <FormRightColumn>\n                <StyledInput\n                  isError={smartContractAddress && isSmartContractAddressError}\n                  onChange={handleSmartContractAddressChange}\n                  placeholder={\"Token required for access\"}\n                  spellCheck={false}\n                  value={smartContractAddress}\n                />\n              </FormRightColumn>\n            </FormRow>\n            <ButtonContainer>\n              <StyledButton onClick={handleRandomizeClick}>\n                Randomize URL\n              </StyledButton>\n              <StyledButton\n                disabled={!isAbleToSave}\n                onClick={handleCreateClick}\n              >\n                Create Shortlink\n              </StyledButton>\n            </ButtonContainer>\n          </FormContainer>\n        </BodyContainer>\n        <Footer />\n      </FadeBlock>\n    </Container>\n  )\n}\n","import {\n  Container,\n  FadeBlock,\n  UndecoratedLink,\n  Title,\n  Highlighted,\n  Description,\n} from \"./styles\"\nimport { Footer } from \"../components/Footer\"\nimport { useEffect } from \"react\"\n\nexport function NewLinkSuccess({ fade, setFade, newLink }) {\n  useEffect(() => {\n    setTimeout(() => setFade({ in: true }), 0)\n  }, [])\n\n  return (\n    <Container>\n      <UndecoratedLink href=\"https://nfkey.to\">\n        <Title style={{ marginBottom: \"20px\" }}>\n          NF<Highlighted>Key</Highlighted>\n        </Title>\n      </UndecoratedLink>\n      <FadeBlock fade={fade}>\n        <Description>\n          <a href={`https://${newLink.host}/${newLink.pathname}`}>\n            {newLink.host}/{newLink.pathname}\n          </a>{\" \"}\n          is now live!\n        </Description>\n        <Footer />\n      </FadeBlock>\n    </Container>\n  )\n}\n","import \"./App.css\"\nimport { useEffect, useState } from \"react\"\nimport { createVisit, getLink } from \"./lib/api\"\nimport { Verify } from \"./views/Verify\"\nimport { Homepage } from \"./views/Homepage\"\nimport { VIEWS } from \"./views/const\"\nimport { NewLinkForm } from \"./views/NewLinkForm\"\nimport { NewLinkSuccess } from \"./views/NewLinkSuccess\"\n\nfunction App() {\n  const { host, pathname } = window.document.location\n  const isPath = pathname !== \"/\"\n  const [link, setLink] = useState()\n  // const [view, setView] = useState(isPath ? VIEWS.LOADING : VIEWS.HOMEPAGE)\n  const [view, setView] = useState(VIEWS.VERIFYING)\n  const [newLink, setNewLink] = useState({})\n  const [fade, setFade] = useState({ in: false })\n\n  useEffect(() => {\n    if (isPath) {\n      getLink(host, String(pathname).substring(1))\n        .then(({ data: link }) => {\n          if (link.destination_url) {\n            setLink(link)\n            setView(VIEWS.VERIFYING)\n          } else {\n            setView(VIEWS.HOMEPAGE)\n          }\n        })\n        .catch((e) => alert(`error getting link: ${e}`))\n    }\n  }, [])\n\n  useEffect(() => {\n    if (view === VIEWS.HOMEPAGE || view === VIEWS.NEWLINKFORM) {\n      createVisit({ page: view })\n    }\n    if (view === VIEWS.VERIFIED) {\n      document.getElementById(\"if\").contentWindow.document.location =\n        link.destination_url\n    }\n  }, [view])\n\n  return (\n    <div className=\"App\">\n      {view === VIEWS.VERIFYING && <Verify link={link} setView={setView} />}\n      {view === VIEWS.VERIFIED && (\n        <iframe\n          id=\"if\"\n          frameborder=\"0\"\n          style={{ height: \"100vh\", width: \"100%\" }}\n        ></iframe>\n      )}\n      {view === VIEWS.NEWLINKFORM && (\n        <NewLinkForm\n          fade={fade}\n          setFade={setFade}\n          setNewLink={setNewLink}\n          setView={setView}\n        />\n      )}\n      {view === VIEWS.NEWLINKSUCCESS && (\n        <NewLinkSuccess\n          fade={fade}\n          setFade={setFade}\n          newLink={newLink}\n          setView={setView}\n        />\n      )}\n      {view === VIEWS.HOMEPAGE && (\n        <Homepage fade={fade} setFade={setFade} setView={setView} />\n      )}\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}